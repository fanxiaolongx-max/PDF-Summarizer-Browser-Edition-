# PDF 总结工具 (浏览器版) - README

这是一个完全在浏览器中运行的、无需后端的 PDF 文件总结工具。它利用本地运行的 Ollama 模型来分析和总结您提供的 PDF 内容，确保所有数据处理都在您的电脑上完成，无需将文件上传到任何外部服务器。

## 主要功能

- **纯浏览器运行**: 无需安装 Python 或任何服务器环境，所有功能都封装在一个独立的 HTML 文件中。
- **保护数据隐私**: PDF 文件解析和与 Ollama 的通信都在您的本地网络中进行，您的文件和数据永远不会离开您的电脑。
- **友好的文件导入**: 支持拖拽一个或多个 PDF 文件到界面，也支持通过点击按钮来选择文件。
- **智能长文处理**: 自动将长篇 PDF 内容分割成小段落，逐一发送给 Ollama 进行总结，有效避免因文本过长导致模型处理缓慢或失败的问题。
- **实时进度反馈**: 界面通过详细的日志和直观的进度条，实时显示文件处理的每一个步骤。
- **自动服务检测**: 页面加载时会自动检测本地 Ollama 服务是否正在运行，以及关键的 CORS 配置是否正确，并提供清晰的故障排查指南。

## 工作原理

1.  **PDF 解析**: 使用 Mozilla 开发的 `PDF.js` 库，直接在浏览器客户端安全地读取 PDF 文件并提取其中的纯文本内容。
2.  **API 调用**: 通过 JavaScript 的 `fetch` API，将提取出的文本分段发送到您本地运行的 Ollama API 端点 (默认为 `http://127.0.0.1:11434`)。
3.  **生成总结**: 本地的 Ollama 模型接收文本并生成摘要，然后将结果返回给浏览器界面进行最终的汇总和显示。

## 环境要求

在使用此工具前，请确保您的电脑满足以下条件：

1.  **一个现代的网页浏览器** (推荐使用 Chrome, Firefox, 或 Edge)。
2.  **本地已安装并正在运行 [Ollama](https://ollama.com/) 服务**。
3.  **至少已下载一个 Ollama 模型** (例如，在终端运行命令 `ollama pull qwen:0.5b`)。

## 如何使用 (重要步骤)

1.  **下载文件**: 将 `pdf_summarizer_browser.html` 文件保存到您电脑的任意位置。

2.  **配置 Ollama (最关键的一步)**:
    - 由于浏览器的安全策略 (CORS)，网页默认不能直接访问像 Ollama 这样的本地服务。您必须手动授权。
    - **解决方法**: 设置一个名为 `OLLAMA_ORIGINS` 的环境变量，并将其值设为 `*`。
    - **设置后，必须完全退出并重启 Ollama 服务**，新的配置才能生效。
    - *提示: 如何设置环境变量，请参考应用界面上红色警告框中的“官方分步指南”链接。*

3.  **打开工具**: 在您的浏览器中，通过 "文件" -> "打开文件..." 的方式，或直接将 `pdf_summarizer_browser.html` 文件拖拽到浏览器窗口中来打开它。

4.  **开始总结**:
    - 页面加载后，会首先检查与 Ollama 服务的连接状态。
    - 连接成功后，将您的 PDF 文件拖拽到指定区域，或点击按钮选择文件。
    - 在下方的日志窗口中查看实时的处理进度和最终生成的总结报告。

## 故障排查

- **问题**: 日志显示 “连接失败”，并且浏览器控制台 (按 F12 打开) 出现关于 `CORS policy` 的错误。
- **原因**: 这是最常见的问题。它意味着 Ollama 服务没有被正确配置以允许来自浏览器的访问。
- **解决方案**: 请严格按照上方 “如何使用” 的 **第 2 步** 进行操作。确认您已经正确设置了 `OLLAMA_ORIGINS` 环境变量，并且**彻底重启了 Ollama 服务**。

## 技术栈

-   HTML5
-   Tailwind CSS
-   JavaScript (ES6+)
-   PDF.js
